---
title: "ã€Goè¨€èªå­¦ç¿’#2ã€‘~é…åˆ—ã¨ã‚¹ãƒ©ã‚¤ã‚¹~"
emoji: "ğŸš•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Goè¨€èª"]
published: false
---

## ã¯ã˜ã‚ã«
æœ€è¿‘Goè¨€èªã‚’å­¦ç¿’ã—å§‹ã‚ãŸã®ã§ã€åŸºæœ¬æ–‡æ³•ã®å®šç€ã‚’å›³ã‚‹ãŸã‚ã«è¨˜äº‹ã«ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚ä»Šå›ã¯`é…åˆ—`ã¨`ã‚¹ãƒ©ã‚¤ã‚¹`ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦å­¦ç¿’ã—ã¦ã„ãã¾ã™ã€‚

å‚è€ƒæ›¸
https://www.amazon.co.jp/dp/4814400047?tag=baldandersinf-22&linkCode=ogi&th=1&psc=1

## é…åˆ—
Goè¨€èªã®é…åˆ—ã¯å›ºå®šé•·ãªã®ã§å¾Œã‹ã‚‰é…åˆ—ã®å¤§ãã•ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚å®£è¨€æ–¹æ³•ã¯`var`ã¨`:=`ã‚’ä½¿ã†äºŒã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚å€¤ã‚’æŒ‡å®šã—ãªã„å ´åˆã¯ã€æŒ‡å®šã—ãŸå‹ã®ã‚¼ãƒ­å€¤ãŒå„è¦ç´ ã«å…¥ã‚Šã¾ã™ã€‚

```go
var arr1 [5]int // ã‚¼ãƒ­å€¤
var arr2 = [5]int{1, 2, 3, 4, 5}
arr3 := [5]int{1, 2, 3, 4, 5}

fmt.Printf("arr1 --> %d\n", arr1)
fmt.Printf("arr2 --> %d\n", arr2)
fmt.Printf("arr3 --> %d\n", arr3)
```

```txt:output
arr1 --> [0 0 0 0 0]
arr2 --> [1 2 3 4 5]
arr3 --> [1 2 3 4 5]
```

### é…åˆ—ã®å‹
Goè¨€èªã§ã¯é…åˆ—ã®å‹ã¯ã€é…åˆ—ã®å¤§ãã•ã¨æŒ‡å®šã—ãŸå‹ã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®äºŒã¤ã®é…åˆ—ã¯`int`ã§å®£è¨€ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã€é…åˆ—ã®å¤§ãã•ãŒç•°ãªã‚‹ã®ã§å‹ã¯ç•°ãªã‚Šã¾ã™ã€‚

```go
arr1 := [5]int{1, 2, 3, 4, 5}
arr2 := [2]int{100, 200}

fmt.Printf("arr1 --> Type: %T, Value: %d\n",arr1, arr1)
fmt.Printf("arr2 --> Type: %T, Value: %d\n",arr2, arr2)
```

```txt:output
arr1 --> Type: [5]int, Value: [1 2 3 4 5]
arr2 --> Type: [2]int, Value: [100 200]
```

### è¦ç´ æ•°ã®çœç•¥
è¦ç´ æ•°ã‚’çœç•¥ã—ãŸã„å ´åˆã«ã¯ã€è¦ç´ æ•°ã§ã¯ãªã`...`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§æŒ‡å®šã—ãŸè¦ç´ æ•°ã§é…åˆ—ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```go
arr1 := [...]int{1, 2, 3, 4, 5}
arr2 := [...]int{1, 2, 3, 4, 5, 6, 7, 8, 9}

fmt.Printf("arr1 --> Type: %T, Value: %d\n", arr1, arr1)
fmt.Printf("arr2 --> Type: %T, Value: %d\n", arr2, arr2)
```

```txt:output
arr1 --> Type: [5]int, Value: [1 2 3 4 5]
arr2 --> Type: [9]int, Value: [1 2 3 4 5 6 7 8 9]
```

### é…åˆ—ã®ä»£å…¥
é…åˆ—ã‚’å¤‰æ•°ã«ä»£å…¥ã™ã‚‹éš›ã«ã¯é…åˆ—ã®ã‚³ãƒ”ãƒ¼ãŒå¤‰æ•°ã«ä»£å…¥ã•ã‚Œã¾ã™ã€‚[Go Slices: usage and internals](https://go.dev/blog/slices-intro)ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ãŒã‚ã‚Šã¾ã™ã€‚

> Goâ€™s arrays are values. An array variable denotes the entire array; it is not a pointer to the first array element (as would be the case in C). This means that when you assign or pass around an array value you will make a copy of its contents. 
> Goã®é…åˆ—ã¯å€¤ã§ã™ã€‚é…åˆ—å¤‰æ•°ã¯é…åˆ—å…¨ä½“ã‚’è¡¨ã—ã¾ã™ã€‚ï¼ˆCè¨€èªã®å ´åˆã®ã‚ˆã†ã«ï¼‰é…åˆ—ã®æœ€åˆã®è¦ç´ ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€é…åˆ—ã®å€¤ã‚’ä»£å…¥ã—ãŸã‚Šæ¸¡ã—ãŸã‚Šã™ã‚‹ã¨ã€ãã®å†…å®¹ã®ã‚³ãƒ”ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

```go
arr1 := [5]int{1, 2, 3, 4, 5}
arr2 := arr1

// arr1ã¸ã®å¤‰æ›´ã¯arr2ã«å½±éŸ¿ã—ãªã„
arr1[0] = 100

fmt.Printf("arr1 --> Pointer: %p, Value: %d\n", &arr1, arr1)
fmt.Printf("arr2 --> Pointer: %p, Value: %d\n", &arr2, arr2)
```

```txt:output
arr1 --> Pointer: 0x140000162a0, Value: [100 2 3 4 5]
arr2 --> Pointer: 0x140000162d0, Value: [1 2 3 4 5]
```

## ã‚¹ãƒ©ã‚¤ã‚¹
Goè¨€èªã®ã€Œå¯å¤‰é•·ã®é…åˆ—ã€ãŒã‚¹ãƒ©ã‚¤ã‚¹ã§ã™ã€‚ã‚¹ãƒ©ã‚¤ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®£è¨€ã—ã¾ã™ã€‚é…åˆ—ã®å®£è¨€ã¨é•ã„ã€`[]`å†…ã®å¤§ãã•ã®æŒ‡å®šã‚’ã—ã¾ã›ã‚“ã€‚

```go
var slice1 [5]int // ã‚¼ãƒ­å€¤
var slice2 = [5]int{1, 2, 3, 4, 5}
slice3 := [5]int{1, 2, 3, 4, 5}

fmt.Printf("slice1 --> %d\n", slice1)
fmt.Printf("slice2 --> %d\n", slice2)
fmt.Printf("slice3 --> %d\n", slice3)
```

```txt:output
slice1 --> [0 0 0 0 0]
slice2 --> [1 2 3 4 5]
slice3 --> [1 2 3 4 5]
```

### è¦ç´ ã®è¿½åŠ 
ã‚¹ãƒ©ã‚¤ã‚¹ã®è¦ç´ ã‚’è¿½åŠ ã™ã‚‹ã«ã¯`append`ã‚’ä½¿ã„ã¾ã™ã€‚`append`é–¢æ•°ã®ç¬¬ä¸€å¼•æ•°ã«å¯¾è±¡ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ã€ç¬¬äºŒå¼•æ•°ä»¥é™ã«å¯¾è±¡ã®ã‚¹ãƒ©ã‚¤ã‚¹ã«è¿½åŠ ã—ãŸã„è¦ç´ ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```go
slice := []int{1}
slice = append(slice, 2, 3, 4, 5)

fmt.Printf("slice --> %d\n", slice)
```

```txt:output
slice --> [1 2 3 4 5]
```

`...`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§å¯¾è±¡ã®ã‚¹ãƒ©ã‚¤ã‚¹ã®æœ€å¾Œã«åˆ¥ã‚¹ãƒ©ã‚¤ã‚¹ã®å…¨è¦ç´ ã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```go
slice1 := []int{1, 2, 3, 4, 5}
slice2 := []int{6, 7, 8, 9}
slice1 = append(slice1, ...slice2)

fmt.Printf("slice1 --> %d\n", slice1)
```

```txt:output
slice1 --> [1 2 3 4 5 6 7 8 9]
```

### é•·ã•ï¼ˆlenï¼‰ã¨å®¹é‡ï¼ˆcapï¼‰
ã‚¹ãƒ©ã‚¤ã‚¹ã¯é•·ã•ã¨å®¹é‡ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ï¼ˆé•·ã•ã¯é…åˆ—ã‚‚æŒã£ã¦ã„ã‚‹ï¼‰ã‚¹ãƒ©ã‚¤ã‚¹ã®é•·ã•ã¨å®¹é‡ãŒåŒã˜å¤§ãã•ã§ã€`append`ã«ã‚ˆã£ã¦ã•ã‚‰ã«è¦ç´ ã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã‚ˆã‚Šå¤§ããªå®¹é‡ã‚’æŒã¤ã‚¹ãƒ©ã‚¤ã‚¹ã®é ˜åŸŸã‚’ç¢ºä¿ã—ã€ãã“ã«æ–°ã—ã„ã‚¹ãƒ©ã‚¤ã‚¹ã®ã‚³ãƒ”ãƒ¼ã¨appendã«æŒ‡å®šã•ã‚ŒãŸè¦ç´ ãŒæœ€å¾Œã«è¿½åŠ ã•ã‚ŒãŸã‚¹ãƒ©ã‚¤ã‚¹ãŒè¿”ã•ã‚Œã¾ã™ã€‚

å®¹é‡ã®å¤‰åŒ–ã‚’è¿½ã£ã¦ã¿ã‚‹
```go
var slice []int
slice = append(slice, 1)
fmt.Printf("Length: %d, Capacity: %d, Value: %d\n", len(slice), cap(slice), slice)
slice = append(slice, 2)
fmt.Printf("Length: %d, Capacity: %d, Value: %d\n", len(slice), cap(slice), slice)
slice = append(slice, 3)
fmt.Printf("Length: %d, Capacity: %d, Value: %d\n", len(slice), cap(slice), slice)
slice = append(slice, 4)
fmt.Printf("Length: %d, Capacity: %d, Value: %d\n", len(slice), cap(slice), slice)
slice = append(slice, 5)
fmt.Printf("Length: %d, Capacity: %d, Value: %d\n", len(slice), cap(slice), slice)
```

```txt:output
Length: 1, Capacity: 1, Value: [1]
Length: 2, Capacity: 2, Value: [1 2]
Length: 3, Capacity: 4, Value: [1 2 3]
Length: 4, Capacity: 4, Value: [1 2 3 4]
Length: 5, Capacity: 8, Value: [1 2 3 4 5]
```

### é…åˆ—ã‹ã‚‰ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã™ã‚‹
`ã‚¹ãƒ©ã‚¤ã‚¹å¼`ã‚’ä½¿ç”¨ã—ã¦é…åˆ—ã‹ã‚‰ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```go
arr := [5]int{1, 2, 3, 4, 5}
slice1 := arr[:]   // æœ€åˆã‹ã‚‰æœ€å¾Œã¾ã§
slice2 := arr[:3]  // æœ€åˆã‹ã‚‰æŒ‡å®šã—ãŸä½ç½®
slice3 := arr[1:3] // æŒ‡å®šã—ãŸç¯„å›²(é–‹å§‹ - çµ‚äº†)
slice4 := arr[2:]  // æŒ‡å®šã—ãŸä½ç½®ã‹ã‚‰æœ€å¾Œã¾ã§

fmt.Printf("arr -----> Pointer: %p, Refer: %p, Value: %d\n", &arr, &arr[0], arr)
fmt.Printf("slice1 --> Pointer: %p, Refer: %p, Value: %d\n", &slice1, &slice1[0], slice1)
fmt.Printf("slice2 --> Pointer: %p, Refer: %p, Value: %d\n", &slice2, &slice2[0], slice2)
fmt.Printf("slice3 --> Pointer: %p, Refer: %p, Value: %d\n", &slice3, &slice3[0], slice3)
fmt.Printf("slice4 --> Pointer: %p, Refer: %p, Value: %d\n", &slice4, &slice4[0], slice4)
```

```txt:output
arr -----> Pointer: 0x140000162a0, Refer: 0x140000162a0, Value: [1 2 3 4 5]
slice1 --> Pointer: 0x1400000c2b8, Refer: 0x140000162a0, Value: [1 2 3 4 5]
slice2 --> Pointer: 0x1400000c2d0, Refer: 0x140000162a0, Value: [1 2 3]
slice3 --> Pointer: 0x1400000c2e8, Refer: 0x140000162a8, Value: [2 3]
slice4 --> Pointer: 0x1400000c300, Refer: 0x140000162b0, Value: [3 4 5]
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å›³ç¤ºã—ã¾ã—ãŸã€‚é…åˆ—ã‹ã‚‰ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã¨é…åˆ—ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã®ã§ã¯ãªãã€ã‚¹ãƒ©ã‚¤ã‚¹ã¯å…ƒã®é…åˆ—ã‚’æŒ‡ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚¹ãƒ©ã‚¤ã‚¹ã¯å…ƒã®é…åˆ—ã‚’æŒ‡ã—ã¦ã„ã‚‹ãŸã‚ã€é…åˆ—ã®è¦ç´ ã‚’å¤‰æ›´ã™ã‚Œã°å½“ç„¶slice1~4ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚

:::message
ã‚‚ã—è§£é‡ˆé•ã„ãªéƒ¨åˆ†ãŒã‚ã‚Œã°ã”æŒ‡æ‘˜ãŠé¡˜ã„ã—ã¾ã™ğŸ˜‘
:::

![](/images/golang-slice.png)

### ã‚¹ãƒ©ã‚¤ã‚¹ã‹ã‚‰ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã™ã‚‹
`ã‚¹ãƒ©ã‚¤ã‚¹å¼`ã‚’ä½¿ç”¨ã—ã¦é…åˆ—ã‹ã‚‰ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã§ãã¾ã—ãŸãŒã€ã‚¹ãƒ©ã‚¤ã‚¹ã‹ã‚‰ã‚‚ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```go
slice := [5]int{1, 2, 3, 4, 5}
slice1 := slice[:]

fmt.Printf("slice ---> Pointer: %p, Refer: %p, Value: %d\n", &slice, &slice[0], slice)
fmt.Printf("slice1 --> Pointer: %p, Refer: %p, Value: %d\n", &slice1, &slice[0], slice1)
```

```txt:output
slice ---> Pointer: 0x140000162a0, Refer: 0x140000162a0, Value: [1 2 3 4 5]
slice1 --> Pointer: 0x1400000c2b8, Refer: 0x140000162a0, Value: [1 2 3 4 5]
```

`Refer`ãŒåŒä¸€ãªã®ã§ã€ä¸€æ–¹ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã¨ã‚‚ã†ä¸€æ–¹ã®ã‚¹ãƒ©ã‚¤ã‚¹ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚

```go
slice := [5]int{1, 2, 3, 4, 5}
slice1 := slice[:]

slice[0] = 100
slice1[3] = 400

fmt.Printf("slice ---> Pointer: %p, Refer: %p, Value: %d\n", &slice, &slice[0], slice)
fmt.Printf("slice1 --> Pointer: %p, Refer: %p, Value: %d\n", &slice1, &slice[0], slice1)
```

```txt:output
slice ---> Pointer: 0x140000b21e0, Refer: 0x140000b21e0, Value: [100 2 3 400 5]
slice1 --> Pointer: 0x140000b02a0, Refer: 0x140000b21e0, Value: [100 2 3 400 5]
```

### ã‚¹ãƒ©ã‚¤ã‚¹ã‚’è¤‡è£½ã™ã‚‹
ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ä»£å…¥ã™ã‚‹ã¨ãƒ¡ãƒ¢ãƒªã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã€å¤‰æ›´ãŒäº’ã„ã«å½±éŸ¿ã—åˆã„ã¾ã™ã€‚ãƒ¡ãƒ¢ãƒªã‚’å…±æœ‰ã›ãšã‚¹ãƒ©ã‚¤ã‚¹ã‚’è¤‡è£½ã—ãŸã„å ´åˆã¯ã€`copy`é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```go
slice1 := []int{1, 2, 3, 4, 5}
slice2 := make([]int, 5)
copy(slice2, slice1)

slice1[0] = 100
slice2[1] = 200

fmt.Printf("slice1 --> Pointer: %p, Refer: %p, Value: %d\n", &slice1, &slice1[0], slice1)
fmt.Printf("slice2 --> Pointer: %p, Refer: %p, Value: %d\n", &slice2, &slice2[0], slice2)
```

```txt:output
slice1 --> Pointer: 0x1400000c2b8, Refer: 0x140000162a0, Value: [100 2 3 4 5]
slice2 --> Pointer: 0x1400000c2d0, Refer: 0x140000162d0, Value: [1 200 3 4 5]
```

## ã¾ã¨ã‚
æ™®æ®µè§¦ã£ã¦ã„ã‚‹TypeScriptã¨ã¯å®£è¨€æ–¹æ³•ã‚„ä»£å…¥æ™‚ã®ãƒ¡ãƒ¢ãƒªå…±æœ‰ãªã©ãŒç•°ãªã‚‹éƒ¨åˆ†ãªã®ã§ã€æ‰‹ã‚’å‹•ã‹ã—ã¦è¨€èªä½¿ç”¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã‚ˆã‚ŠGoè¨€èªã®é…åˆ—ã¨ã‚¹ãƒ©ã‚¤ã‚¹ã«ã¤ã„ã¦ç†è§£ãŒé€²ã¿ã¾ã—ãŸã€‚

ä¸€äººå‰ã®Gopherç›®æŒ‡ã—ã¦é ‘å¼µã‚Šã¾ã™ğŸ’ª

## å‚è€ƒ
https://go.dev/blog/slices-intro
https://zenn.dev/spiegel/articles/20210315-array-and-slice
https://qiita.com/k-penguin-sato/items/daad9986d6c42bdcde90
https://www.amazon.co.jp/dp/4814400047?tag=baldandersinf-22&linkCode=ogi&th=1&psc=1
